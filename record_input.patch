diff --git a/ex.c b/ex.c
index c0d11fe4..865b8a18 100644
--- a/ex.c
+++ b/ex.c
@@ -22,6 +22,7 @@ int xpac;			/* print autocomplete options */
 int xkwdcnt;			/* number of search kwd changes */
 int xbufcur;			/* number of active buffers */
 int xgrec;			/* global vi/ex recursion depth */
+int xrec;			/* input recoding register */
 struct buf *bufs;		/* main buffers */
 struct buf tempbufs[2];		/* temporary buffers, for internal use */
 struct buf *ex_buf;		/* current buffer */
@@ -952,6 +953,7 @@ static struct option {
 	{"sep", &xsep},
 	{"lim", &xlim},
 	{"seq", &xseq},
+	{"rec", &xrec},
 };
 
 static int ec_set(char *loc, char *cmd, char *arg)
diff --git a/term.c b/term.c
index aad65b80..b23b7f0b 100644
--- a/term.c
+++ b/term.c
@@ -160,6 +160,12 @@ int term_read(void)
 		}
 		ibuf_cnt = 1;
 		ibuf_pos = 0;
+		if (xrec && *ibuf) {
+			char buf[2];
+			buf[0] = *ibuf;
+			buf[1] = '\0';
+			vi_regputraw(xrec, buf, 0, 1);
+		}
 	}
 	if (icmd_pos < sizeof(icmd))
 		icmd[icmd_pos++] = ibuf[ibuf_pos];
diff --git a/vi.h b/vi.h
index c17d9ead..4d6da59f 100644
--- a/vi.h
+++ b/vi.h
@@ -502,6 +502,7 @@ extern int xpr;
 extern int xsep;
 extern int xlim;
 extern int xseq;
+extern int xrec;
 extern rset *xkwdrs;
 extern sbuf *xacreg;
 extern rset *fsincl;
