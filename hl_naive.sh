#!/bin/sh
# Generated by patch2vi from unified diff
# Separator: '@'
set -e

# Path to nextvi (adjust as needed)
VI=${VI:-vi}

# Verify that VI is nextvi
if ! $VI -? 2>&1 | grep -q 'Nextvi'; then
    echo "Error: $VI is not nextvi" >&2
    echo "Set VI environment variable to point to nextvi" >&2
    exit 1
fi

# Patch: led.c
EXINIT="rcm:|sc! @|vis 6@245;7;26c 
.
@vis 4@vis 6@214,232c 			att[p->off] = syn_merge(p->att, att[p->off]);
.
@vis 4@vis 6@207,208c 		syn_highlight(att, s0, n);
.
@vis 4@167,205d@vis 6@154,156c 	int *att = emalloc(n * sizeof(att[0]));
	memset(att, 0, n * sizeof(att[0]));
.
@vis 4@vis 6@150,151c 	int att_old = 0, cterm = cend - cbeg;
.
@vis 4@vis 6@119;16;38c 
.
@vis 4@wq" $VI -e 'led.c'
